<!DOCTYPE html>
<html lang="ja">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <title>ã—ã™â˜…ã‚ã</title>
Â  Â  <style>
Â  Â  Â  Â  /* CSSã‚¹ã‚¿ã‚¤ãƒ«ã¯ã“ã“ã«ã‚ã‚Šã¾ã™ */
Â  Â  Â  Â  body { font-family: sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
Â  Â  Â  Â  h1 { border-bottom: 2px solid #ccc; padding-bottom: 5px; }
Â  Â  Â  Â  .report-form input[type="text"], .report-form textarea, .report-form select {
Â  Â  Â  Â  Â  Â  width: 100%; padding: 8px; margin-bottom: 10px; box-sizing: border-box;
Â  Â  Â  Â  }
Â  Â  Â  Â  .report-form button { padding: 10px 15px; background-color: #4CAF50; color: white; border: none; cursor: pointer; }
Â  Â  Â  Â  .report-item { border: 1px solid #eee; padding: 15px; margin-bottom: 10px; border-radius: 5px; }
Â  Â  Â  Â  /* report-headerã‚’å°‘ã—èª¿æ•´ã—ã¦ã€ã„ã„ã­ãƒªã‚¹ãƒˆã®è¡¨ç¤ºã‚¹ãƒšãƒ¼ã‚¹ã‚’ç¢ºä¿ */
Â  Â  Â  Â  .report-header { display: flex; justify-content: space-between; font-size: 0.9em; color: #666; margin-bottom: 5px;}
Â  Â  Â  Â  .report-content strong { display: block; margin-top: 5px; color: #333; }
Â  Â  Â  Â  .like-button { background-color: #f0f0f0; border: none; padding: 5px 10px; cursor: pointer; border-radius: 3px; }
Â  Â  Â  Â  /* æ–°ã—ã„ã‚¹ã‚¿ã‚¤ãƒ«ï¼šã„ã„ã­ã—ãŸäººã®åå‰ãƒªã‚¹ãƒˆç”¨ */
Â  Â  Â  Â  .liked-by-list {Â 
Â  Â  Â  Â  Â  Â  font-size: 0.9em;Â 
Â  Â  Â  Â  Â  Â  color: #444;Â 
Â  Â  Â  Â  Â  Â  margin-top: 5px;
Â  Â  Â  Â  Â  Â  text-align: right;Â 
Â  Â  Â  Â  }
Â  Â  </style>
</head>
<body>
Â  Â  <h2>éå»ã®æ—¥å ±ä¸€è¦§</h2>
Â  Â  <div id="reportList">
Â  Â  Â  Â  </div>

Â  Â  <script>
Â  Â  Â  Â  // ----------------------------------------------------
Â  Â  Â  Â  // 1. è¨­å®š
Â  Â  Â  Â  // ----------------------------------------------------
Â  Â  Â  Â  // ã“ã“ã«GASã®ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒªURLã‚’è²¼ã‚Šä»˜ã‘ã¾ã™
Â  Â  Â  Â  const GAS_WEB_APP_URL = 'https://script.google.com/macros/s/AKfycbwV0pz9MJwhiHAMywG6nMRBWefmcpa1YpSDYwfAYkrROpiFTez9TuINq0tfM0T3PvdGGg/exec';Â 

Â  Â  Â  Â  // ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼ˆå‹•ä½œç¢ºèªç”¨ï¼‰
Â  Â  Â  Â  const dummyData = [
Â  Â  Â  Â  Â  Â  { id: '1', name: 'ä½è—¤', date: '2025-12-07T08:58:00.000Z', condition: 'ğŸ˜€', todayTask: 'ã‚', nextTask: 'ã‚', impression: 'ã‚', likedBy: ['çŸ³äº•', 'æ¸¡è¾º'] },
Â  Â  Â  Â  Â  Â  { id: '2', name: 'ç”°ä¸­', date: '2025-12-06T10:30:00.000Z', condition: 'ğŸ’ª', todayTask: 'ãƒ†ã‚¹ãƒˆ', nextTask: 'ãƒ†ã‚¹ãƒˆ', impression: 'ãƒ†ã‚¹ãƒˆ', likedBy: ['æ± ä¸Š'] },
Â  Â  Â  Â  Â  Â  { id: '3', name: 'å±±æœ¬', date: '2025-12-05T09:15:00.000Z', condition: 'ğŸ™‚', todayTask: 'ä½œæ¥­', nextTask: 'ä½œæ¥­', impression: 'ä½œæ¥­', likedBy: [] }
Â  Â  Â  Â  ];

Â  Â  Â  Â  // ----------------------------------------------------
Â  Â  Â  Â  // 2. æ©Ÿèƒ½ â‘¡: æ—¥å ±ä¸€è¦§è¡¨ç¤ºæ©Ÿèƒ½ (GET) - ä¿®æ­£å¾Œã®ã‚³ãƒ¼ãƒ‰
Â  Â  Â  Â  // ----------------------------------------------------
Â  Â  Â  Â  async function fetchReports() {
Â  Â  Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  Â  Â  // â˜…â˜…â˜… ç¾åœ¨ã¯ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ â˜…â˜…â˜…
Â  Â  Â  Â  Â  Â  Â  Â  const reports = dummyData; 
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  // å®Ÿéš›ã®ãƒ‡ãƒ¼ã‚¿å–å¾—ã«åˆ‡ã‚Šæ›¿ãˆã‚‹ã¨ãã¯ã€ä»¥ä¸‹ã®2è¡Œã®ã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆã‚’å¤–ã—ã¾ã™
Â  Â  Â  Â  Â  Â  Â  Â  // const response = await fetch(GAS_WEB_APP_URL);
Â  Â  Â  Â  Â  Â  Â  Â  // const reports = (await response.json()).data;
Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  const reportListElement = document.getElementById('reportList');
Â  Â  Â  Â  Â  Â  Â  Â  reportListElement.innerHTML = '';Â 
Â  Â  Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  Â  Â  reports.forEach(report => {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // â˜…â˜…â˜… æ—¥ä»˜ã®è¡¨ç¤ºå½¢å¼ã‚’å¤‰æ›ã™ã‚‹å‡¦ç† â˜…â˜…â˜…
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const dateObj = new Date(report.date); // æ—¥ä»˜ã®ç®±ï¼ˆDateã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆï¼‰ã‚’ä½œæˆ
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // éƒ¨å“ã‚’å–ã‚Šå‡ºã—ã€2æ¡ã«èª¿æ•´
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const year = dateObj.getFullYear();
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // getMonth()ã¯ 0 ã‹ã‚‰å§‹ã¾ã‚‹ãŸã‚ +1 ã™ã‚‹
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const month = (dateObj.getMonth() + 1).toString().padStart(2, '0');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const day = dateObj.getDate().toString().padStart(2, '0');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const hours = dateObj.getHours().toString().padStart(2, '0');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const minutes = dateObj.getMinutes().toString().padStart(2, '0');

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // èª­ã¿ã‚„ã™ã„å½¢å¼ã«é€£çµ
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const formattedDate = `${year}/${month}/${day} ${hours}æ™‚${minutes}åˆ†`;


Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  // ã„ã„ã­ã—ãŸäººã®ãƒªã‚¹ãƒˆè¡¨ç¤ºï¼ˆè¡¨ç¤ºå½¢å¼ã¯å¤‰ãˆã¦ã„ã¾ã›ã‚“ï¼‰
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const likedByListHtml = report.likedBy && report.likedBy.length > 0
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ? `<div class="liked-by-list">${report.likedBy.map(name => `**${name}ã„ã„ã­**`).join(' ')}</div>`
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  : ''; 

Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  const item = document.createElement('div');
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.className = 'report-item';
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  item.innerHTML = `
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="report-header">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span>**${report.name}** / ${formattedDate} / ã‚³ãƒ³ãƒ‡ã‚£ã‚·ãƒ§ãƒ³: ${report.condition}</span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <span class="like-section">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <button class="like-button" onclick="likeReport('${report.id}', this)">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ã„ã„ã­ğŸ‘ (${report.likedBy ? report.likedBy.length : 0})
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </button>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  ${likedByListHtml}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </span>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="report-content">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>ä»Šæ—¥ã‚„ã£ãŸã“ã¨:</strong> ${report.todayTask.replace(/\n/g, '<br>')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>ç¿Œå–¶æ¥­æ—¥ã‚„ã‚‹ã“ã¨:</strong> ${report.nextTask.replace(/\n/g, '<br>')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <strong>æ‰€æ„Ÿãƒ»å­¦ã³:</strong> ${report.impression.replace(/\n/g, '<br>')}
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  `;
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  reportListElement.appendChild(item);
Â  Â  Â  Â  Â  Â  Â  Â  });
                
Â  Â  Â  Â  Â  Â  Â  Â  // å‹•ä½œç¢ºèªãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
Â  Â  Â  Â  Â  Â  Â  Â  if (reports === dummyData) {
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('reportList').insertAdjacentHTML('beforeend', '<p>ãƒ€ãƒŸãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚’ä½¿ç”¨ã—ã¦è¡¨ç¤ºã—ã¦ã„ã¾ã™ã€‚</p>');
Â  Â  Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  } catch (error) {
Â  Â  Â  Â  Â  Â  Â  Â  console.error("æ—¥å ±ã®èª­ã¿è¾¼ã¿ä¸­ã«ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ:", error);
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('reportList').innerHTML = '<p>æ—¥å ±ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸã€‚</p>';
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
// ... (postReport, likeReport é–¢æ•°ã¨ window.onload ã¯çœç•¥ã—ã¾ã›ã‚“) ...
Â  Â  Â  Â Â 
Â  Â  Â  Â  // ----------------------------------------------------
Â  Â  Â  Â  // 3. æ©Ÿèƒ½ â‘ : æ—¥å ±æŠ•ç¨¿æ©Ÿèƒ½ (POST)Â 
Â  Â  Â  Â  // ... (postReport é–¢æ•°ã¯å…ƒã®ã¾ã¾ã§OK) ...

Â  Â  Â  Â  // ----------------------------------------------------
Â  Â  Â  Â  // 4. æ©Ÿèƒ½ â‘¢: ã€Œã„ã„ã­ã€ãƒªã‚¢ã‚¯ã‚·ãƒ§ãƒ³æ©Ÿèƒ½Â 
Â  Â  Â  Â  // ... (likeReport é–¢æ•°ã¯å…ƒã®ã¾ã¾ã§OK) ...

Â  Â  Â  Â  // 5. ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®å‡¦ç†
Â  Â  Â  Â  window.onload = fetchReports;

Â  Â  </script>
</body>
</html>
